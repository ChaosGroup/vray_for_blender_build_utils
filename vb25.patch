--- source/blender/makesrna/intern/rna_nodetree.c	2010-07-19 17:09:26.470122557 +0400
+++ rna_nodetree.c	2010-07-19 17:15:37.298075649 +0400
@@ -2192,6 +2192,37 @@
 	RNA_def_property_float_funcs(prop, NULL, NULL, "rna_NodeSocket_defvalue_range");
 }
 
+static void rna_def_node_link(BlenderRNA *brna)
+{
+	StructRNA *srna;
+	PropertyRNA *prop;
+	
+	srna = RNA_def_struct(brna, "NodeLink", NULL);
+	RNA_def_struct_ui_text(srna, "NodeLink", "Link between nodes in a node tree");
+	RNA_def_struct_sdna(srna, "bNodeLink");
+	RNA_def_struct_ui_icon(srna, ICON_NODE);
+
+	prop = RNA_def_property(srna, "from_node", PROP_POINTER, PROP_NONE);
+	RNA_def_property_pointer_sdna(prop, NULL, "fromnode");
+	RNA_def_property_struct_type(prop, "Node");
+	RNA_def_property_ui_text(prop, "From node", "");
+
+	prop = RNA_def_property(srna, "to_node", PROP_POINTER, PROP_NONE);
+	RNA_def_property_pointer_sdna(prop, NULL, "tonode");
+	RNA_def_property_struct_type(prop, "Node");
+	RNA_def_property_ui_text(prop, "To node", "");
+
+	prop = RNA_def_property(srna, "from_socket", PROP_POINTER, PROP_NONE);
+	RNA_def_property_pointer_sdna(prop, NULL, "fromsock");
+	RNA_def_property_struct_type(prop, "NodeSocket");
+	RNA_def_property_ui_text(prop, "From socket", "");
+
+	prop = RNA_def_property(srna, "to_socket", PROP_POINTER, PROP_NONE);
+	RNA_def_property_pointer_sdna(prop, NULL, "tosock");
+	RNA_def_property_struct_type(prop, "NodeSocket");
+	RNA_def_property_ui_text(prop, "To socket", "");
+}
+
 static void rna_def_node(BlenderRNA *brna)
 {
 	StructRNA *srna;
@@ -2245,6 +2276,12 @@
 	RNA_def_property_collection_sdna(prop, NULL, "nodes", NULL);
 	RNA_def_property_struct_type(prop, "Node");
 	RNA_def_property_ui_text(prop, "Nodes", "");
+
+	/* NodeLinks Collection */
+	prop = RNA_def_property(srna, "links", PROP_COLLECTION, PROP_NONE);
+	RNA_def_property_collection_sdna(prop, NULL, "links", NULL);
+	RNA_def_property_struct_type(prop, "NodeLink");
+	RNA_def_property_ui_text(prop, "Links", "");
 	
 	/* Grease Pencil */
 	prop= RNA_def_property(srna, "grease_pencil", PROP_POINTER, PROP_NONE);
@@ -2271,6 +2308,7 @@
 	rna_def_node_socket_vector(brna);
 	rna_def_node_socket_rgba(brna);
 	rna_def_node(brna);
+	rna_def_node_link(brna);
 	rna_def_shader_node(brna);
 	rna_def_compositor_node(brna);
 	rna_def_texture_node(brna);
--- source/blender/SConscript	2010-07-19 17:09:57.809133217 +0400
+++ SConscript	2010-07-19 17:30:30.617622329 +0400
@@ -16,6 +16,7 @@
             'readblenfile/SConscript',
             'render/SConscript',
             'nodes/SConscript',
+            'exporter/SConscript',
             'modifiers/SConscript',
             'ikplugin/SConscript',
             'windowmanager/SConscript',
--- source/blender/editors/space_api/spacetypes.c	2010-07-19 17:09:38.327627551 +0400
+++ space_api/spacetypes.c	2010-07-19 17:21:13.397622897 +0400
@@ -57,6 +57,8 @@
 #include "ED_mball.h"
 #include "ED_logic.h"
 
+#include "exporter_ops.h"
+
 /* only call once on startup, storage is global in BKE kernel listbase */
 void ED_spacetypes_init(void)
 {
@@ -102,7 +104,10 @@
 	ED_operatortypes_sound();
 	ED_operatortypes_render();
 	ED_operatortypes_logic();
-	
+
+    // V-Ray/Blender exporter operator
+	ED_operatortypes_exporter();
+
 	UI_view2d_operatortypes();
 	UI_buttons_operatortypes();
 	
--- source/blender/editors/space_api/SConscript	2010-07-19 17:09:38.327627551 +0400
+++ space_api/SConscript	2010-07-19 17:20:02.931373123 +0400
@@ -4,6 +4,7 @@
 sources = env.Glob('*.c')
 
 incs = '../include ../../blenlib ../../blenkernel ../../makesdna'
+incs += ' ../../exporter'
 incs += ' ../../windowmanager ../../python ../../makesrna'
 incs += ' #/intern/guardedalloc #/extern/glew/include'
 
